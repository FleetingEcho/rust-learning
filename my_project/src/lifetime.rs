//æ‚¬å‚æŒ‡é’ˆå’Œç”Ÿå‘½å‘¨æœŸ

/*
{
    let r;  // è¿™é‡Œ r åªæ˜¯å£°æ˜ï¼Œä½†æœªåˆå§‹åŒ–

    {
        let x = 5;  // x åœ¨è¿™ä¸ªä½œç”¨åŸŸå†…åˆ›å»º
        r = &x;     // r è¯•å›¾å­˜å‚¨å¯¹ x çš„å¼•ç”¨
    }  // x ä½œç”¨åŸŸç»“æŸï¼Œx è¢«é‡Šæ”¾

    println!("r: {}", r);  // r ä»ç„¶å¼•ç”¨ xï¼Œä½† x å·²è¢«é‡Šæ”¾ï¼Œå¯¼è‡´æ‚¬å‚æŒ‡é’ˆ
}
å¦‚ä½•ä¿®æ­£ï¼Ÿ
{
    let x = 5;
    let r = &x; // r å¼•ç”¨äº† xï¼Œä½† x ä»ç„¶æœ‰æ•ˆ
    println!("r: {}", r);
} // x åœ¨è¿™é‡Œæ‰è¢«é‡Šæ”¾

å€Ÿç”¨æ£€æŸ¥


*/


/*
å‡½æ•°ä¸­çš„ç”Ÿå‘½å‘¨æœŸ

//ç¼–è¯‘å¤±è´¥
fn main() {
    let string1 = String::from("abcd");
    let string2 = "xyz";

    let result = longest(string1.as_str(), string2);
    println!("The longest string is {}", result);
}


x å’Œ y æ˜¯ä¸¤ä¸ª &strï¼ˆå­—ç¬¦ä¸²åˆ‡ç‰‡ï¼‰ï¼Œå®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸå¯èƒ½ä¸åŒã€‚
å‡½æ•°è¿”å›å€¼ &str ä¹Ÿæ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œä½† Rust æ— æ³•æ¨æ–­å®ƒçš„ç”Ÿå‘½å‘¨æœŸåº”è¯¥ä¸ x è¿˜æ˜¯ y å…³è”ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªæ–°çš„ç”Ÿå‘½å‘¨æœŸã€‚
ç”±äº Rust çš„ å€Ÿç”¨æ£€æŸ¥ è§„åˆ™ï¼Œå¿…é¡»æ˜¾å¼å£°æ˜ç”Ÿå‘½å‘¨æœŸï¼Œç¡®ä¿è¿”å›çš„å¼•ç”¨åœ¨å¤–éƒ¨ä»ç„¶æœ‰æ•ˆã€‚

å› ä¸º x å’Œ y å¯èƒ½æœ‰ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸï¼ŒRust å¿…é¡» æ˜¾å¼æ ‡æ³¨ã€‚
fn longest(x: &str, y: &str) -> &str {
    if x.len() > y.len() {
        x
    } else {
        y
    }
}

ç”Ÿå‘½å‘¨æœŸå‚æ•°
&i32        // ä¸€ä¸ªå¼•ç”¨
&'a i32     // å…·æœ‰æ˜¾å¼ç”Ÿå‘½å‘¨æœŸçš„å¼•ç”¨
&'a mut i32 // å…·æœ‰æ˜¾å¼ç”Ÿå‘½å‘¨æœŸçš„å¯å˜å¼•ç”¨


ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ ‡æ³¨ï¼Œå®ƒè‡ªèº«å¹¶ä¸å…·æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œå› ä¸ºç”Ÿå‘½å‘¨æœŸçš„ä½œç”¨å°±æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨å¤šä¸ªå¼•ç”¨ä¹‹é—´çš„å…³ç³»ã€‚
å’Œæ³›å‹ä¸€æ ·ï¼Œä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼Œéœ€è¦å…ˆå£°æ˜ <'a>


å¦‚ä½•ä¿®å¤ï¼Ÿ
 ç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼ˆlifetime parametersï¼‰ï¼Œå‘Šè¯‰ Rustï¼šè¿”å›çš„å¼•ç”¨ å¿…é¡» ä¸ x å’Œ y ä¹‹ä¸­ è‡³å°‘å­˜åœ¨æ—¶é—´æœ€çŸ­çš„é‚£ä¸ª ä¸€æ ·é•¿ã€‚


fn main() {
    let string1 = String::from("abcd");
    let string2 = "xyz";

    let result = longest(string1.as_str(), string2);
    println!("The longest string is {}", result);
}

fn longest<'a>(x: &'a str, y: &'a str) -> &'a str {
    if x.len() > y.len() {
        x
    } else {
        y
    }
}

'a æ˜¯ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼Œå®ƒä»£è¡¨ä¸€ä¸ª æœªçŸ¥ä½†ç›¸åŒçš„ç”Ÿå‘½å‘¨æœŸã€‚
x: &'a str, y: &'a strï¼šè¡¨ç¤º x å’Œ y å¿…é¡»æ´»å¾—è‡³å°‘å’Œ 'a ä¸€æ ·é•¿ã€‚
-> &'a strï¼šè¡¨ç¤º è¿”å›çš„å¼•ç”¨ä¹Ÿå¿…é¡»æ´»å¾—è‡³å°‘å’Œ 'a ä¸€æ ·é•¿ã€‚


longest ä¸ä¼šè¿”å›ä¸€ä¸ªæ¯”å‚æ•°æ›´çŸ­ç”Ÿå‘½å‘¨æœŸçš„å¼•ç”¨ï¼ˆé¿å…æ‚¬å‚æŒ‡é’ˆï¼‰ã€‚
longest è¿”å›çš„å¼•ç”¨ ä»ç„¶æœ‰æ•ˆï¼Œå› ä¸ºå®ƒå’Œ xã€y å…±äº«ç”Ÿå‘½å‘¨æœŸ 'aã€‚




3. å¦‚æœ longest ç›´æ¥è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¿˜éœ€è¦ç”Ÿå‘½å‘¨æœŸå—ï¼Ÿ
ä¸éœ€è¦ï¼å› ä¸ºè¿”å›å€¼ ä¸å†æ˜¯å¼•ç”¨ï¼Œè€Œæ˜¯ä¸€ä¸ªæ–°çš„ Stringï¼Œå®ƒæœ‰ è‡ªå·±çš„æ‰€æœ‰æƒï¼š

fn longest(x: &str, y: &str) -> String {
    if x.len() > y.len() {
        x.to_string()
    } else {
        y.to_string()
    }
}
è¿™é‡Œ String æ˜¯ å€¼ç±»å‹ï¼Œä¸ä¼šæ¶‰åŠç”Ÿå‘½å‘¨æœŸé—®é¢˜ã€‚

*/


/*
fn longest<'a>(x: &'a str, y: &'a str) -> &'a str {
    if x.len() > y.len() {
        x
    } else {
        y
    }
}


fn main() {
    let string1 = String::from("long string is long");
    let result;
    {
        let string2 = String::from("xyz"); // `string2` åœ¨è¿™ä¸ªä»£ç å—å†…åˆ›å»º
        result = longest(string1.as_str(), string2.as_str()); // `result` è¯•å›¾å­˜å‚¨å¯¹ `string2` æˆ– `string1` çš„å¼•ç”¨
    } // `string2` ä½œç”¨åŸŸç»“æŸï¼Œè¢«é‡Šæ”¾

    println!("The longest string is {}", result); // âŒ `result` å¯èƒ½å­˜å‚¨äº† `string2` çš„å¼•ç”¨ï¼Œä½† `string2` å·²è¢«é‡Šæ”¾ï¼
}

å¦‚ä½•ä¿®å¤ï¼Ÿ
æ–¹æ³• 1ï¼šä¿è¯ string2 çš„ç”Ÿå‘½å‘¨æœŸè¶³å¤Ÿé•¿
fn main() {
    let string1 = String::from("long string is long");
    let string2 = String::from("xyz"); // âœ… `string2` åœ¨ `main` å†…éƒ¨åˆ›å»ºï¼Œä½œç”¨åŸŸè¶³å¤Ÿé•¿
    let result = longest(string1.as_str(), string2.as_str());
    println!("The longest string is {}", result);
}


æ–¹æ³• 2ï¼šè¿”å›ä¸€ä¸ªæ–°çš„ String
fn longest(x: &str, y: &str) -> String {
    if x.len() > y.len() {
        x.to_string()  // âœ… ç›´æ¥è¿”å›æ–°çš„ `String`ï¼Œä¸ä¼šæœ‰ç”Ÿå‘½å‘¨æœŸé—®é¢˜
    } else {
        y.to_string()
    }
}

fn main() {
    let string1 = String::from("long string is long");
    let result;
    {
        let string2 = String::from("xyz");
        result = longest(string1.as_str(), string2.as_str()); // âœ… ç°åœ¨ `result` æ‹¥æœ‰ä¸€ä¸ªæ–° `String`
    }
    println!("The longest string is {}", result); // âœ… ä¸å†å¼•ç”¨ `string2`
}

*/





/*
å‡½æ•°çš„è¿”å›å€¼å¦‚æœæ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œé‚£ä¹ˆå®ƒçš„ç”Ÿå‘½å‘¨æœŸåªä¼šæ¥æºäºï¼š

å‡½æ•°å‚æ•°çš„ç”Ÿå‘½å‘¨æœŸ
å‡½æ•°ä½“ä¸­æŸä¸ªæ–°å»ºå¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸ

fn longest<'a>(x: &str, y: &str) -> &'a str {
    let result = String::from("really long string");
    result.as_str() //ç¼–è¯‘é”™è¯¯ï¼Œ å› ä¸ºè¿”å›äº†resultçš„å¼•ç”¨
}

//å¦‚ä½•è§£å†³ï¼Ÿ
//æœ€å¥½çš„åŠæ³•å°±æ˜¯è¿”å›å†…éƒ¨å­—ç¬¦ä¸²çš„æ‰€æœ‰æƒï¼Œç„¶åæŠŠå­—ç¬¦ä¸²çš„æ‰€æœ‰æƒè½¬ç§»ç»™è°ƒç”¨è€…ï¼š

fn longest<'a>(_x: &str, _y: &str) -> String {
    String::from("really long string")
}

fn main() {
   let s = longest("not", "important");
}


*/


/*
ç»“æ„ä½“ä¸­çš„ç”Ÿå‘½å‘¨æœŸ

fn main() {
    let novel = String::from("Call me Ishmael. Some years ago...");//novel å˜é‡å­˜å‚¨åœ¨ å †ä¸Šï¼ˆå› ä¸º String æ˜¯å †åˆ†é…çš„ï¼‰ã€‚
    let first_sentence = novel.split('.').next().expect("Could not find a '.'");


    // split('.') ä¼šè¿”å› è¿­ä»£å™¨ï¼Œnext() å–ç¬¬ä¸€ä¸ª å­å­—ç¬¦ä¸²åˆ‡ç‰‡ &strã€‚
    // first_sentence æ˜¯ novel çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒåªæ˜¯ä¸€ä¸ª &strï¼ˆæŒ‡å‘ novel å†…å­˜çš„å¼•ç”¨ï¼‰ï¼Œå¹¶ä¸æ‹¥æœ‰æ•°æ®ã€‚


    let i = ImportantExcerpt {
        part: first_sentence,  // `part` å­˜å‚¨çš„æ˜¯ `first_sentence` çš„å¼•ç”¨
    };
}


ä¸ºä»€ä¹ˆä¸æŠ¥é”™ï¼Ÿ

fn main() {
    let novel = String::from("Call me Ishmael. Some years ago..."); // novel ç”Ÿå‘½å‘¨æœŸå¼€å§‹
    let first_sentence = novel.split('.').next().expect("Could not find a '.'");

    let i = ImportantExcerpt {
        part: first_sentence,  // `part` çš„ç”Ÿå‘½å‘¨æœŸ <= `novel`
    }; // `i` ä½œç”¨åŸŸç»“æŸ

} // `novel` ä½œç”¨åŸŸç»“æŸï¼Œå†…å­˜é‡Šæ”¾ âœ… å®‰å…¨
first_sentence ä¾èµ–äº novelï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸ ä¸èƒ½è¶…è¿‡ novelã€‚
i.part å¼•ç”¨äº† first_sentenceï¼Œæ‰€ä»¥ i ä¸èƒ½æ´»å¾—æ¯” novel æ›´ä¹…ã€‚
Rust è‡ªåŠ¨æ¨å¯¼ç”Ÿå‘½å‘¨æœŸï¼Œç¡®ä¿ i åŠå…¶å­—æ®µ part åœ¨ novel é‡Šæ”¾å‰æœ‰æ•ˆã€‚


å¦‚ä½•æ­£ç¡®ä½¿ç”¨ç»“æ„ä½“ä¸­çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ

ä½¿ç”¨ String ä»£æ›¿ &str
å¦‚æœä½  å¸Œæœ› ImportantExcerpt å…·æœ‰ç‹¬ç«‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¯ä»¥ è®©å®ƒæ‹¥æœ‰å­—ç¬¦ä¸²æ•°æ®ï¼š
struct ImportantExcerpt {
    part: String, // âœ… `String` æœ‰æ‰€æœ‰æƒï¼Œä¸éœ€è¦ç”Ÿå‘½å‘¨æœŸå‚æ•°
}

fn main() {
    let novel = String::from("Call me Ishmael. Some years ago...");
    let first_sentence = novel.split('.').next().expect("Could not find a '.'").to_string(); // âœ… å¤åˆ¶æ•°æ®

    let i = ImportantExcerpt {
        part: first_sentence, // âœ… `ImportantExcerpt` æ‹¥æœ‰ `String`ï¼Œä¸å†å— `novel` å½±å“
    };

    println!("Excerpt: {}", i.part);
}


*/


//ç”Ÿå‘½å‘¨æœŸæ¶ˆé™¤

fn first_word(s: &str) -> &str {
    let bytes = s.as_bytes();

    for (i, &item) in bytes.iter().enumerate() {
        if item == b' ' {
            return &s[0..i];
        }
    }

    &s[..]
}
/*
s æ˜¯ &str ç±»å‹çš„ è¾“å…¥å¼•ç”¨ã€‚
å‡½æ•°è¿”å› &strï¼ˆå³ä» s çš„æŸéƒ¨åˆ†æˆªå–çš„åˆ‡ç‰‡ï¼‰ã€‚
è¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸä¸€å®šä¸ä¼šè¶…è¿‡ s çš„ç”Ÿå‘½å‘¨æœŸï¼Œå› ä¸º &s[0..i] æˆ– &s[..] éƒ½æ¥è‡ª sï¼Œæ‰€ä»¥ Rust å¯ä»¥è‡ªåŠ¨æ¨å¯¼å®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸã€‚




*/


/*
Rust çš„ç”Ÿå‘½å‘¨æœŸæ¶ˆé™¤è§„åˆ™
è§„åˆ™ 1ï¼šæ¯ä¸ªå¼•ç”¨å‚æ•°éƒ½æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸ
fn first_word<'a>(s: &'a str) -> &str { ... }
è¿™é‡Œçš„ 'a ä»£è¡¨ s çš„ç”Ÿå‘½å‘¨æœŸï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ¨æ–­ã€‚


è§„åˆ™ 2ï¼šå¦‚æœåªæœ‰ä¸€ä¸ªè¾“å…¥ç”Ÿå‘½å‘¨æœŸï¼Œè¿”å›å€¼ç»§æ‰¿è¯¥ç”Ÿå‘½å‘¨æœŸ
fn first_word<'a>(s: &'a str) -> &'a str { ... }
s çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ 'aï¼Œè¿”å›å€¼çš„ &str ä¹Ÿ å¿…é¡»æ´»å¾—å’Œ s ä¸€æ ·é•¿ã€‚
ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åŠ ä¸Š 'aï¼Œæ‰€ä»¥ä¸ç”¨æ‰‹å†™ã€‚

è§„åˆ™ 3ï¼šå¦‚æœæœ‰å¤šä¸ªè¾“å…¥å¼•ç”¨ï¼Œä½†è¿”å›å€¼åªå’ŒæŸä¸ªå‚æ•°æœ‰å…³ï¼Œå¿…é¡»æ‰‹åŠ¨æ ‡æ³¨
fn longest<'a>(x: &'a str, y: &'a str) -> &'a str { ... }
è¿™é‡Œ longest å¯èƒ½è¿”å› x æˆ– yï¼ŒRust æ— æ³•æ¨æ–­ è¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¿…é¡»æ‰‹åŠ¨æ ‡æ³¨ã€‚




//è‡ªåŠ¨æ¨æ–­ä¸¾ä¾‹ï¼Ÿ
//åªæœ‰ä¸€ä¸ªå‚æ•° sï¼Œè¿”å›å€¼ä¸€å®šæ¥è‡ª sï¼Œæ‰€ä»¥å¯ä»¥å®‰å…¨æ¨å¯¼ç”Ÿå‘½å‘¨æœŸã€‚


fn first_word(s: &str) -> &str { // âœ… åªæ¶‰åŠä¸€ä¸ªå‚æ•°ï¼ŒRust è‡ªåŠ¨æ¨æ–­
    let bytes = s.as_bytes();

    for (i, &item) in bytes.iter().enumerate() {
        if item == b' ' {
            return &s[0..i];
        }
    }

    &s[..]
}


æ€»ç»“
æƒ…å†µ	æ˜¯å¦é€‚ç”¨ç”Ÿå‘½å‘¨æœŸæ¶ˆé™¤	åŸå› 
ä¸€ä¸ªå¼•ç”¨å‚æ•°ï¼ˆ&str æˆ– &Tï¼‰	âœ… é€‚ç”¨	è¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸç›´æ¥ç»§æ‰¿å‚æ•°çš„ç”Ÿå‘½å‘¨æœŸ
å¤šä¸ªå¼•ç”¨å‚æ•°ï¼Œè¿”å›å€¼ä¾èµ–å…¶ä¸­ä¹‹ä¸€	âŒ ä¸é€‚ç”¨	Rust æ— æ³•æ¨æµ‹è¿”å›å€¼å±äºå“ªä¸ªå‚æ•°
å¤šä¸ªå¼•ç”¨å‚æ•°ï¼Œä½†è¿”å› &selfï¼ˆæ–¹æ³•ï¼‰	âœ… é€‚ç”¨	self çš„ç”Ÿå‘½å‘¨æœŸ é»˜è®¤è¢«ç»§æ‰¿
Rust é€šè¿‡ ç”Ÿå‘½å‘¨æœŸæ¶ˆé™¤ï¼Œé¿å… ä¸å¿…è¦çš„æ‰‹å†™ç”Ÿå‘½å‘¨æœŸï¼Œä½†åœ¨ å¤šä¸ªå¼•ç”¨å‚æ•°çš„æƒ…å†µä¸‹ï¼Œä»ç„¶éœ€è¦ æ˜¾å¼å£°æ˜ç”Ÿå‘½å‘¨æœŸï¼Œä»¥ç¡®ä¿å¼•ç”¨çš„å®‰å…¨æ€§ã€‚

*/


/*
æ–¹æ³•ä¸­çš„ç”Ÿå‘½å‘¨æœŸ

impl<'a: 'b, 'b> ImportantExcerpt<'a> {
    fn announce_and_return_part(&'a self, announcement: &'b str) -> &'b str {
        println!("Attention please: {}", announcement);
        self.part
    }
}

å…³é”®ç‚¹
'a: 'b è¯´æ˜ 'a å¿…é¡»æ¯” 'b æ´»å¾—ä¹…ï¼š

'a: 'b ä»£è¡¨ 'a çš„ç”Ÿå‘½å‘¨æœŸå¿…é¡»æ¯” 'b é•¿ï¼Œç¡®ä¿ self.partï¼ˆ&'a strï¼‰çš„å¼•ç”¨ä¸ä¼šæ¯” announcementï¼ˆ&'b strï¼‰çŸ­ã€‚
è¿™æ ·ä¿è¯äº† self.part åœ¨ announcement ä»ç„¶æœ‰æ•ˆæ—¶ä¸ä¼šè¢«é‡Šæ”¾ï¼Œé¿å…æ‚¬å‚å¼•ç”¨ã€‚
ä¸ºä»€ä¹ˆ 'a å¿…é¡»æ¯” 'b æ´»å¾—ä¹…ï¼Ÿ

&'a self è¡¨ç¤º ImportantExcerpt ç»“æ„ä½“çš„ self æ‹¥æœ‰ ç”Ÿå‘½å‘¨æœŸ 'aã€‚
announcement: &'b str ä¼ å…¥çš„æ˜¯ä¸€ä¸ª çŸ­ç”Ÿå‘½å‘¨æœŸçš„å­—ç¬¦ä¸²å¼•ç”¨ï¼ˆå¯èƒ½åªæ˜¯ä¸€ä¸ªä¸´æ—¶å­—ç¬¦ä¸²ï¼‰ã€‚
ç”±äº self.part æ¥è‡ª selfï¼Œæ‰€ä»¥ self ä¸èƒ½æ¯” announcement æ—©è¢«é‡Šæ”¾ï¼Œå¦åˆ™ self.part å¯èƒ½æŒ‡å‘ä¸€ä¸ªå·²ç»æ— æ•ˆçš„å€¼ã€‚
*/


/*
é™æ€ç”Ÿå‘½å‘¨æœŸ
é™æ€ç”Ÿå‘½å‘¨æœŸï¼ˆ'staticï¼‰
åœ¨ Rust ä¸­ï¼Œ'static æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç”Ÿå‘½å‘¨æœŸï¼Œæ„å‘³ç€ å¼•ç”¨çš„å†…å®¹ä¼šåœ¨ç¨‹åºçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…æœ‰æ•ˆã€‚é€šå¸¸ç”¨äºï¼š

å­—ç¬¦ä¸²å­—é¢é‡ï¼ˆå®ƒä»¬è¢«å­˜å‚¨åœ¨ç¨‹åºçš„é™æ€æ•°æ®åŒºï¼‰
å…¨å±€å˜é‡
æŸäº›é•¿ç”Ÿå‘½å‘¨æœŸçš„èµ„æºï¼Œå¦‚çº¿ç¨‹ä¸­çš„æ•°æ®

let s: &'static str = "æˆ‘æ²¡å•¥ä¼˜ç‚¹ï¼Œå°±æ˜¯æ´»å¾—ä¹…ï¼Œå˜¿å˜¿";


fn main() {
    let s: &'static str = "Hello, world!";
    println!("{}", s);
}


é™æ€ç”Ÿå‘½å‘¨æœŸçš„å˜é‡
å…¨å±€å˜é‡é€šå¸¸å…·æœ‰ 'static ç”Ÿå‘½å‘¨æœŸï¼š

static HELLO: &str = "Hello, world!"; // 'static ç”Ÿå‘½å‘¨æœŸ

static å…³é”®å­—æ„å‘³ç€ æ•´ä¸ªç¨‹åºè¿è¡ŒæœŸé—´ï¼Œå˜é‡ HELLO éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚
åŒºåˆ«ï¼š static å˜é‡å­˜å‚¨åœ¨ é™æ€å†…å­˜åŒºï¼Œè€Œéæ ˆä¸Šã€‚




å¦‚æœä½ å°è¯•é”™è¯¯åœ°æ”¹æˆï¼š

fn longest<'a>(x: &'a str, y: &'a str) -> &'static str {  // âŒ é”™è¯¯ï¼
    if x.len() > y.len() {
        x
    } else {
        y
    }
}
é”™è¯¯åŸå› ï¼š

è¿™é‡Œçš„è¿”å›å€¼å£°æ˜ä¸º &'static strï¼Œä½† x å’Œ y çš„ç”Ÿå‘½å‘¨æœŸ å¯èƒ½è¿œå°äº 'staticã€‚
Rust ä¸èƒ½ä¿è¯ x æˆ– y ä¼šä¸€ç›´æ´»ç€ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚




æ€»ç»“
åœºæ™¯	æ˜¯å¦ 'static ç”Ÿå‘½å‘¨æœŸ	åŸå› 
å­—ç¬¦ä¸²å­—é¢é‡ (&str)	âœ… é»˜è®¤ 'static	ç¼–è¯‘æ—¶å­˜å…¥äºŒè¿›åˆ¶ï¼Œç¨‹åºè¿è¡ŒæœŸé—´å§‹ç»ˆæœ‰æ•ˆ
å…¨å±€ static å˜é‡	âœ… é»˜è®¤ 'static	å…¨å±€å˜é‡å­˜å‚¨åœ¨é™æ€åŒºï¼Œå’Œç¨‹åºåŒç”Ÿå‘½å‘¨æœŸ
çº¿ç¨‹ä¸­çš„æ•°æ®	âœ… æœ‰æ—¶éœ€è¦ 'static	ç¡®ä¿æ•°æ®åœ¨çº¿ç¨‹è¿è¡ŒæœŸé—´ä¸ä¼šè¢«é‡Šæ”¾
æ™®é€šå­—ç¬¦ä¸² String	âŒ ä¸é€‚ç”¨	String å­˜å‚¨åœ¨å †ä¸Šï¼Œä½œç”¨åŸŸç»“æŸä¼šè¢«é‡Šæ”¾
æ‰‹åŠ¨æ ‡æ³¨ 'static	âš ï¸ è°¨æ…ä½¿ç”¨	å¯èƒ½ä¼šå¯¼è‡´é”™è¯¯çš„ç”Ÿå‘½å‘¨æœŸæ¨å¯¼ï¼Œå¢åŠ æ‚¬å‚å¼•ç”¨é£é™©


æœ€ä½³å®è·µ
è®© Rust è‡ªåŠ¨æ¨å¯¼ç”Ÿå‘½å‘¨æœŸï¼Œé™¤éä½ çœŸçš„éœ€è¦ 'staticã€‚
&'static str é€‚ç”¨äºå­—ç¬¦ä¸²å­—é¢é‡ï¼Œä¸é€‚ç”¨äº Stringã€‚
åœ¨å¤šçº¿ç¨‹æˆ–é•¿æœŸå­˜æ´»çš„æ•°æ®æ—¶è€ƒè™‘ 'staticï¼Œä½†ä¸è¦æ»¥ç”¨å®ƒæ¥ç»•è¿‡ç¼–è¯‘å™¨çš„æ£€æŸ¥ï¼ ğŸš€


*/


// Rust ç”Ÿå‘½å‘¨æœŸ+æ³›å‹+ç‰¹å¾çº¦æŸçš„ç»„åˆä½¿ç”¨ï¼

use std::fmt::Display;

fn longest_with_an_announcement<'a, T>(
    x: &'a str,
    y: &'a str,
    ann: T,
) -> &'a str // é¿å…æ‚¬å‚å¼•ç”¨ï¼Œç¡®ä¿è¿”å›çš„ &str åœ¨ x å’Œ y å¤±æ•ˆå‰ä»ç„¶æœ‰æ•ˆã€‚
where
    T: Display, // ç‰¹å¾çº¦æŸï¼Œ å¿…é¡»å®ç°Display
{
    println!("Announcement! {}", ann);
    if x.len() > y.len() {
        x
    } else {
        y
    }
}


fn main() {
    let s1 = String::from("short");
    let s2 = String::from("very long string");

    let announcement = "Comparing lengths...";
    let result = longest_with_an_announcement(s1.as_str(), s2.as_str(), announcement);

    println!("The longest string is: {}", result);
}

